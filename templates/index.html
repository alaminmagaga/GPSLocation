{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Web Server Content</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDHNUG9E870MPZ38LzijxoPyPgtiUFYjTM"></script>
    <script>
        function initMap() {
            // Get the latitude and longitude from the context data passed by the Django view
            var latitude = {{ latitude }};
            var longitude = {{ longitude }};
            
            // Create a LatLng object with the latitude and longitude
            var location = { lat: latitude, lng: longitude };
            
            // Create a map centered at the location
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 15,
                center: location
            });
            
            // Add a marker at the location
            var marker = new google.maps.Marker({
                position: location,
                map: map,
                title: 'Current Location'
            });
            
            // Display the latitude and longitude
            var latLngDiv = document.getElementById('latLng');
            latLngDiv.innerHTML = 'Latitude: ' + latitude + '<br>Longitude: ' + longitude;
        }
    </script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        
        .navbar {
            background-color: #333;
            overflow: hidden;
        }

        #map {
            height: 400px;
        }
        
        .navbar a {
            float: left;
            color: #f2f2f2;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 17px;
        }
        
        .navbar a:hover {
            background-color: #ddd;
            color: black;
        }
        
        .container {
            margin: 20px;
        }
        
        .box {
            padding: 10px;
        }
        
        h1 {
            margin: 0;
        }
        
        iframe {
            width: 100%;
            height: 400px;
            border: none;
        }
    </style>

    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>
<body onload="initMap()">
   
    <div class="navbar">
        <a href="#home">Home</a>
        <a href="#about">About</a>
        <a href="#services">Services</a>
        <a href="#contact">Contact</a>
    </div>
    <div class="w3-center"><h1><b>Vehicle Tracking System</b></h1></div>
    <div class="w3-container w3-center"> <img src="{% static 'track.jpg' %}" width="70%" alt=""></div>
    <div class="container">
        <div class="box">
            <div id="project-details" class="w3-container">
                
                
                <button onclick="toggleDetails()" class="w3-btn w3-teal">How we Build Live Tracking System</button>

                
                <div id="projectDetails" class="w3-hide w3-gray">
                    <h2>How to Build Live Tracking System</h2>
                    <p>
                        In this project, we will build a Live Tracking System using ESP32. The system will allow us to track the real-time location of an object using GPS and display it on a web-based map interface.
                    </p>
                    <h3>Components Required</h3>
                    <ul>
                        <li>ESP32 development board</li>
                        <li>GPS module (such as NEO-6M)</li>
                        <li>Jumper wires</li>
                        <li>Breadboard</li>
                        <li>USB cable for ESP32 programming and power</li>
                    </ul>
                    <h3>Step-by-Step Instructions</h3>
                    <ol>
                        <li>Connect the GPS module to the ESP32 development board using jumper wires. Make sure to connect the GPS module's TX pin to the ESP32's RX pin and the GPS module's RX pin to the ESP32's TX pin.</li>
                        <li>Upload the necessary libraries for GPS and WiFi connectivity to the ESP32 board.</li>
                        <li>Set up a WiFi network on the ESP32 to establish an internet connection. Provide the network name (SSID) and password in the code.</li>
                        <li>Create a web server on the ESP32 to serve the live tracking map interface to connected clients.</li>
                        <li>Initialize the GPS module and retrieve the current GPS coordinates.</li>
                        <li>Update the map center and marker position with the obtained GPS coordinates.</li>
                        <li>Periodically refresh the GPS coordinates and update the map and marker accordingly.</li>
                        <li>Host the web server on the ESP32 and access the live tracking system by connecting to the ESP32's IP address.</li>
                    </ol>
                    <h3>Additional Resources</h3>
                    <ul>
                        <li>ESP32 documentation and tutorials</li>
                        <li>TinyGPS library documentation</li>
                        <li>Google Maps JavaScript API documentation</li>
                    </ul>
                </div>
            </div>
            <br>
            <div id="map"></div>
            <div id="latLng"></div>
        </div>
    </div>
    <script>
        function toggleDetails() {
            var details = document.getElementById("projectDetails");
            if (details.className.indexOf("w3-show") == -1) {
                details.className += " w3-show";
            } else {
                details.className = details.className.replace(" w3-show", "");
            }
        }
    </script>
</body>
</html>
